<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>TFE17-2 Calendar Viewer</title>
<link href='./fullcalendar.min.css' rel='stylesheet' />
<link href='./fullcalendar.print.min.css' rel='stylesheet' media='print' />
<script src='./lib/moment.min.js'></script>
<script src='./lib/jquery.min.js'></script>
<script src='./fullcalendar.min.js'></script>
<script src='./ical.min.js'></script>
<script src='./icalsource.js'></script>
<script type="text/javascript">

function add_ical_source(url) {
  $('#calendar').fullCalendar('removeEventSources')
  $('#calendar').fullCalendar('addEventSource', ical_event_source(url));
}

 $(document).ready(function () {
    $('#calendar').fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay,listMonth'
      },
      navLinks: true, // can click day/week names to navigate views
      editable: true,
      minTime: "8:00:00",
      maxTime: "19:00:00",
      weekends: false, // will hide Saturdays and Sundays
      defaultView: 'agendaWeek',
      allDaySlot: false, 
      timeFormat: 'H:mm',
      slotLabelFormat: "HH:mm",
      
      // eventClick: function(calEvent, jsEvent) {
//         var title = prompt('Event Title:', calEvent.title, {
//             buttons: {
//                 Ok: true,
//                 Cancel: false
//             }
//         });
// 
//         if (title) {
//             calEvent.title = title;
//             $('#calendar').fullCalendar('updateEvent', calEvent);
//         }
//       },
//       

      header: {
      	center: 'addEventButton'
      },

      customButtons: {
        addEventButton: {
          text: 'Vorlesung hinzuf√ºgen',
          click: function() {
            var dateStr = prompt('Geben Sie ein Datum im Format JJJJ-MM-TT ein');
            var date = moment(dateStr);

            if (date.isValid()) {
              $('#calendar').fullCalendar('renderEvent', {
                title: 'dynamic event',
                start: date,
                allDay: true
              });
              alert('Great. Now, update your database...');
            } else {
              alert('Invalid date.');
            }
          }
        }
      }
    });
    
    add_ical_source('https://imazze.github.io/TableToIcal/bin/TFE17-2%20-%204.%20Semester.ics');
      
  });
</script>
<style>
  body {
    margin: 40px 10px;
    padding: 0;
    font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
    font-size: 14px;
  }

  #calendar, header, h1, footer {
    max-width: 900px;
    margin: 0 auto;
  }
  header {
    margin: 0 auto 20px
  }
  header input {
    width: 70%;
    font-size: medium;
    padding: 4px
  }
  header button {
    font-size: medium;
    padding: 4px;
    width: 20%
  }
</style>
</head>
<body>
  <div id='calendar'></div>
</body>
</html>
